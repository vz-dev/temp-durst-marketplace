{% set static = compressionData['static'] is defined ? compressionData['static'] : true %}
brotli {{ static is same as('only') ? 'off' : 'on' }};
brotli_static {{ static ? 'on' : 'off' }};
brotli_comp_level {{ compressionData['level'] | default(5) }};
brotli_min_length 50;
# For the option brotli_types, the mime-type text/html is always included by default.
brotli_types {{ compressionData['types'] | default([]) | merge([
    'text/richtext',
    'text/plain',
    'text/css',
    'text/x-script',
    'text/x-component',
    'text/x-java-source',
    'text/x-markdown',
    'application/javascript',
    'application/x-javascript',
    'text/javascript',
    'text/js',
    'image/x-icon',
    'image/vnd.microsoft.icon',
    'application/x-perl',
    'application/x-httpd-cgi',
    'text/xml',
    'application/xml',
    'application/xml+rss',
    'application/vnd.api+json',
    'application/x-protobuf',
    'application/json',
    'multipart/bag',
    'multipart/mixed',
    'application/xhtml+xml',
    'font/ttf',
    'font/otf',
    'font/woff',
    'font/woff2',
    'font/x-woff',
    'image/svg+xml',
    'application/vnd.ms-fontobject',
    'application/ttf',
    'application/x-ttf',
    'application/otf',
    'application/x-otf',
    'application/truetype',
    'application/opentype',
    'application/x-opentype',
    'application/font-woff',
    'application/font-woff2',
    'application/eot',
    'application/font',
    'application/font-sfnt',
    'application/wasm',
    'application/javascript-binast',
    'application/manifest+json',
    'application/ld+json',
]) | unique | join (' ') }};
